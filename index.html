<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lite TV Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        :root { --main: #ff0040; --bg: #050505; }
        body, html { margin: 0; padding: 0; background: var(--bg); color: #fff; font-family: sans-serif; overflow: hidden; height: 100%; }

        /* ‡¶™‡ßç‡¶≤‡ßá‡ßü‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ï‡¶∂‡¶® - ‡¶Æ‡ßá‡¶Æ‡¶∞‡¶ø ‡¶∏‡¶æ‡¶∂‡ßç‡¶∞‡ßü‡ßÄ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .video-box { width: 100%; height: 55vh; background: #000; position: relative; }
        video { width: 100%; height: 100%; outline: none; background: #000; }

        /* ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶ó‡ßç‡¶∞‡¶ø‡¶° - ‡¶≤‡ßç‡¶Ø‡¶æ‡¶ó ‡¶´‡ßç‡¶∞‡¶ø ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶ø‡¶Ç */
        .list-area { height: 45vh; padding: 15px; overflow-y: auto; scroll-behavior: smooth; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 15px; }

        /* ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .card { 
            background: #111; border-radius: 12px; padding: 10px; text-align: center;
            cursor: pointer; border: 2px solid transparent; outline: none; transition: 0.2s;
        }
        .card:focus { transform: scale(1.1); border-color: var(--main); background: #1a1a1a; }

        .logo { width: 70px; height: 70px; background: #fff; border-radius: 50%; margin: 0 auto 8px; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        .logo img { width: 80%; height: auto; }
        .name { font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: #ccc; }

        /* ‡¶≠‡¶≤‡¶ø‡¶â‡¶Æ ‡¶ì ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶á‡¶®‡¶´‡ßã ‡¶™‡¶™‡¶Ü‡¶™ */
        #msg { position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.8); padding: 8px 15px; border-radius: 5px; display: none; border-left: 4px solid var(--main); font-weight: bold; z-index: 10; }
    </style>
</head>
<body>

    <div class="video-box">
        <div id="msg"></div>
        <video id="video" autoplay controls></video>
    </div>

    <div class="list-area">
        <div class="grid" id="grid">
            <div style="padding: 20px;">‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...</div>
        </div>
    </div>

    <script>
        const m3uUrl = 'https://raw.githubusercontent.com/soheltanver85-a11y/Live-tv2/refs/heads/main/Live-tv2';
        const video = document.getElementById('video');
        let channels = [];
        let curIdx = 0;

        // ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ç ‡¶á‡¶û‡ßç‡¶ú‡¶ø‡¶® (HLS.js) - ‡¶Ø‡¶æ ‡¶≤‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ï‡¶Æ‡¶æ‡ßü
        function playStream(url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(video);
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = url;
            }
            video.play();
        }

        async function init() {
            try {
                const res = await fetch(m3uUrl);
                const data = await res.text();
                const lines = data.split('\n');
                
                let name = '', logo = '';
                lines.forEach(line => {
                    if (line.startsWith('#EXTINF')) {
                        name = line.split(',')[1] || 'Unknown';
                        const logoMatch = line.match(/tvg-logo="(.*?)"/);
                        logo = logoMatch ? logoMatch[1] : '';
                    } else if (line.startsWith('http')) {
                        channels.push({ name, logo, url: line.trim() });
                    }
                });
                render();
                if(channels.length > 0) select(0);
            } catch (e) { alert("Internet error!"); }
        }

        function render() {
            const container = document.getElementById('grid');
            container.innerHTML = channels.map((ch, i) => `
                <div class="card" tabindex="0" id="ch-${i}" onclick="select(${i})">
                    <div class="logo"><img src="${ch.logo}" onerror="this.src='https://via.placeholder.com/100?text=TV'"></div>
                    <div class="name">${ch.name}</div>
                </div>
            `).join('');
        }

        function showInfo(txt) {
            const box = document.getElementById('msg');
            box.innerText = txt; box.style.display = 'block';
            clearTimeout(window.t);
            window.t = setTimeout(() => box.style.display = 'none', 3000);
        }

        function select(i) {
            if(i < 0) i = channels.length - 1;
            if(i >= channels.length) i = 0;
            curIdx = i;
            playStream(channels[i].url);
            showInfo("üì∫ " + channels[i].name);
            const el = document.getElementById(`ch-${i}`);
            if(el) el.focus();
        }

        // ‡¶∞‡¶ø‡¶Æ‡ßã‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® (Fast Navigation)
        document.addEventListener('keydown', (e) => {
            if (e.keyCode === 39) select(curIdx + 1); // Right
            if (e.keyCode === 37) select(curIdx - 1); // Left
            if (e.keyCode === 38) { // Up (Vol+)
                video.volume = Math.min(video.volume + 0.1, 1);
                showInfo("üîä Volume: " + Math.round(video.volume * 100) + "%");
            }
            if (e.keyCode === 40) { // Down (Vol-)
                video.volume = Math.max(video.volume - 0.1, 0);
                showInfo("üîâ Volume: " + Math.round(video.volume * 100) + "%");
            }
            if (e.keyCode === 13) { // OK
                video.paused ? video.play() : video.pause();
            }
        });

        init();
    </script>
</body>
</html>
